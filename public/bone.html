<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bone Facture Detection</title>
    <link rel="stylesheet" type="text/css" href="/style.css">
    <style>
        canvas {
            display: block;
            border: 1px solid black;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <script src="server.js"></script>
    <h1>Bone facture</h1>
    <form method="post" enctype="multipart/form-data" action="/bone">
        <label for="image-upload">upload x-ray radiographs Image only :</label>

        <input type="file" name="image" id="file" accept=".tif,.png,.jpeg">
        <br>
        <button id="segment-button`" type="submit">submit</button>
    </form>
    
<!--   
<p>
    <canvas id="canvas"></canvas>
</p>
<script>
    const form = document.getElementById('upload-form');
    form.addEventListener('submit', async (event) => {
        event.preventDefault();
        const data = new FormData(form);
        const response = await fetch('/bone', {
            method: 'post',
            body: data
        });
        const boxes = await response.json();
        const fileInput = document.getElementById('image-upload');
        if (fileInput.files.length > 0) {
            drawImageAndBoxes(fileInput.files[0], boxes);
        }
    });

    function drawImageAndBoxes(file, boxes) {
        const img = new Image();
        img.src = URL.createObjectURL(file);
        img.onload = () => {
            const canvas = document.getElementById('canvas');
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(img, 0, 0);
            ctx.strokeStyle = "#00FF00";
            ctx.lineWidth = 3;
            ctx.font = "18px serif";
            boxes.forEach(box => {
                const [x1, y1, x2, y2, label, score] = box;
                ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);
                ctx.fillStyle = "#00FF00";
                const text = `${label} (${(score * 100).toFixed(2)}%)`;
                const width = ctx.measureText(text).width;
                ctx.fillRect(x1, y1 - 20, width + 10, 25);
                ctx.fillStyle = "#000000";
                ctx.fillText(text, x1, y1 - 5);
            });
        };
    }
</script>
</body>
</html>
-->
<p>
    <img id="mask-image" />
</p>
 </body>
 </html>